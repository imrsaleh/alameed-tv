<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AL-AMEED TV | Ø§Ù„Ø¯ÙˆØ±ÙŠ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&family=Bebas+Neue&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-deep: #050810;
        --bg-surface: #0c1120;
        --bg-card: #111827;
        --bg-card-hover: #162036;
        --accent: #00e676;
        --accent-glow: #00e67633;
        --live: #ff3d57;
        --live-glow: #ff3d5733;
        --gold: #ffd54f;
        --gold-glow: #ffd54f22;
        --text-primary: #f0f4ff;
        --text-secondary: #8899bb;
        --text-muted: #3a4f70;
        --border: #1a2840;
        --border-light: #263850;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Tajawal", sans-serif;
        background: var(--bg-deep);
        color: var(--text-primary);
        min-height: 100vh;
        overflow-x: hidden;
      }
      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background:
          radial-gradient(
            ellipse 90% 60% at 50% -10%,
            #0a2040 0%,
            transparent 60%
          ),
          radial-gradient(
            ellipse 50% 50% at 90% 90%,
            #001830 0%,
            transparent 60%
          );
        pointer-events: none;
        z-index: 0;
      }

      /* â”€â”€ HEADER â”€â”€ */
      .header {
        position: sticky;
        top: 0;
        z-index: 200;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
        height: 60px;
        background: rgba(5, 8, 16, 0.92);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid var(--border);
      }
      .logo {
        font-family: "Bebas Neue", sans-serif;
        font-size: 24px;
        letter-spacing: 3px;
        color: var(--accent);
        text-decoration: none;
        text-shadow: 0 0 24px var(--accent-glow);
      }
      .header-nav {
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .header-nav a {
        color: var(--text-secondary);
        text-decoration: none;
        font-size: 13px;
        font-weight: 500;
        padding: 6px 14px;
        border-radius: 8px;
        transition: all 0.2s;
      }
      .header-nav a:hover {
        color: var(--text-primary);
        background: var(--border);
      }
      .back-btn {
        border: 1px solid var(--border) !important;
        transition: border-color 0.2s !important;
      }
      .back-btn:hover {
        border-color: var(--border-light) !important;
      }

      /* â”€â”€ LEAGUE HERO â”€â”€ */
      .league-hero {
        position: relative;
        z-index: 1;
        max-width: 900px;
        margin: 28px auto 0;
        padding: 0 16px;
        animation: fadeUp 0.45s ease forwards;
      }
      .league-identity {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 24px 28px;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        gap: 20px;
      }
      .league-identity::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(
          ellipse 80% 70% at 50% 0%,
          rgba(0, 230, 118, 0.04),
          transparent 65%
        );
        pointer-events: none;
      }
      .league-emblem {
        width: 64px;
        height: 64px;
        flex-shrink: 0;
        border-radius: 14px;
        background: var(--bg-surface);
        border: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 30px;
        overflow: hidden;
      }
      .league-emblem img {
        width: 48px;
        height: 48px;
        object-fit: contain;
      }
      .league-info {
        flex: 1;
        min-width: 0;
      }
      .league-name {
        font-family: "Bebas Neue", sans-serif;
        font-size: clamp(24px, 5vw, 38px);
        letter-spacing: 2px;
        color: var(--text-primary);
        line-height: 1;
        margin-bottom: 5px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .league-meta {
        font-size: 13px;
        color: var(--text-secondary);
      }

      /* live badge in hero */
      .live-hero-badge {
        flex-shrink: 0;
        display: flex;
        align-items: center;
        gap: 6px;
        background: var(--live-glow);
        border: 1px solid var(--live);
        border-radius: 20px;
        padding: 5px 14px;
        font-size: 12px;
        font-weight: 700;
        color: var(--live);
      }
      .live-hero-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--live);
        animation: dotPulse 1.2s ease infinite;
      }

      /* â”€â”€ DATE NAVIGATOR â”€â”€ */
      .date-nav {
        position: relative;
        z-index: 1;
        display: flex;
        align-items: center;
        padding: 20px 12px 16px;
        max-width: 900px;
        margin: 0 auto;
      }
      .date-arrow {
        flex-shrink: 0;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 50%;
        cursor: pointer;
        color: var(--text-secondary);
        font-size: 18px;
        transition: all 0.2s;
        user-select: none;
      }
      .date-arrow:hover {
        border-color: var(--accent);
        color: var(--accent);
        box-shadow: 0 0 10px var(--accent-glow);
      }
      .date-arrow:active {
        transform: scale(0.9);
      }
      .date-strip-wrap {
        flex: 1;
        overflow: hidden;
        position: relative;
        margin: 0 8px;
      }
      .date-strip-wrap::before,
      .date-strip-wrap::after {
        content: "";
        position: absolute;
        top: 0;
        bottom: 0;
        width: 28px;
        z-index: 2;
        pointer-events: none;
      }
      .date-strip-wrap::before {
        right: 0;
        background: linear-gradient(to left, var(--bg-deep), transparent);
      }
      .date-strip-wrap::after {
        left: 0;
        background: linear-gradient(to right, var(--bg-deep), transparent);
      }
      .date-strip {
        display: flex;
        gap: 6px;
        overflow-x: auto;
        scroll-behavior: smooth;
        padding: 4px 6px;
        scrollbar-width: none;
      }
      .date-strip::-webkit-scrollbar {
        display: none;
      }
      .date-pill {
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 8px 14px;
        border-radius: 50px;
        background: var(--bg-card);
        border: 1px solid var(--border);
        cursor: pointer;
        transition: all 0.2s;
        min-width: 64px;
      }
      .date-pill:hover {
        border-color: var(--border-light);
        transform: translateY(-1px);
      }
      .date-pill .pill-label {
        font-size: 11px;
        font-weight: 600;
        color: var(--text-muted);
        letter-spacing: 0.5px;
        line-height: 1;
        margin-bottom: 2px;
      }
      .date-pill .pill-day {
        font-family: "Bebas Neue", sans-serif;
        font-size: 18px;
        color: var(--text-secondary);
        letter-spacing: 1px;
        line-height: 1;
      }
      .date-pill.active {
        background: var(--accent);
        border-color: var(--accent);
        box-shadow:
          0 0 16px var(--accent-glow),
          0 4px 12px rgba(0, 230, 118, 0.25);
      }
      .date-pill.active .pill-label,
      .date-pill.active .pill-day {
        color: #000;
      }
      .date-pill.is-today .pill-label {
        color: var(--accent);
      }
      .date-pill.is-today:not(.active) .pill-day {
        color: var(--text-primary);
      }
      .date-pill.has-match::after {
        content: "";
        display: block;
        width: 4px;
        height: 4px;
        border-radius: 50%;
        background: var(--accent);
        margin-top: 3px;
        opacity: 0.7;
      }
      .date-pill.has-live::after {
        background: var(--live);
        animation: dotPulse 1.2s ease infinite;
      }

      /* â”€â”€ FILTER ROW â”€â”€ */
      .filter-row {
        position: relative;
        z-index: 1;
        display: flex;
        align-items: center;
        justify-content: space-between;
        max-width: 900px;
        margin: 0 auto 14px;
        padding: 0 16px;
        gap: 10px;
      }
      .filter-label {
        font-size: 12px;
        font-weight: 700;
        color: var(--text-muted);
        letter-spacing: 1px;
        text-transform: uppercase;
      }
      .show-all-btn {
        background: none;
        border: 1px solid var(--border);
        color: var(--text-secondary);
        font-family: "Tajawal", sans-serif;
        font-size: 12px;
        font-weight: 600;
        padding: 5px 14px;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.2s;
      }
      .show-all-btn:hover {
        border-color: var(--accent);
        color: var(--accent);
      }
      .show-all-btn.active {
        background: var(--accent);
        color: #000;
        border-color: var(--accent);
      }

      /* â”€â”€ MATCHES â”€â”€ */
      .matches-wrapper {
        position: relative;
        z-index: 1;
        max-width: 900px;
        margin: 0 auto;
        padding: 0 14px 80px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      /* â”€â”€ MATCH CARD â”€â”€ */
      .match-card {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        gap: 10px;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 15px 18px;
        text-decoration: none;
        color: inherit;
        transition: all 0.22s ease;
        position: relative;
        overflow: hidden;
        animation: fadeUp 0.3s ease forwards;
        opacity: 0;
      }
      .match-card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          transparent 55%,
          rgba(0, 230, 118, 0.02)
        );
        pointer-events: none;
      }
      .match-card:hover {
        background: var(--bg-card-hover);
        border-color: var(--border-light);
        transform: translateY(-2px);
        box-shadow: 0 8px 28px rgba(0, 0, 0, 0.4);
      }
      .match-card.is-live {
        border-color: #ff3d5766;
        box-shadow:
          inset 0 0 30px rgba(255, 61, 87, 0.04),
          0 0 0 1px rgba(255, 61, 87, 0.15);
      }
      .match-card.hidden {
        display: none;
      }

      .team-side {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .team-side.right {
        flex-direction: row-reverse;
      }
      .team-logo {
        width: 38px;
        height: 38px;
        object-fit: contain;
        border-radius: 50%;
        background: var(--bg-surface);
        padding: 4px;
        flex-shrink: 0;
      }
      .team-name {
        font-size: 14px;
        font-weight: 600;
        color: var(--text-primary);
        line-height: 1.2;
      }
      .team-side.right .team-name {
        text-align: right;
      }

      .match-center {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        min-width: 88px;
      }
      .score-display {
        font-family: "Bebas Neue", sans-serif;
        font-size: 30px;
        letter-spacing: 4px;
        color: var(--text-primary);
        line-height: 1;
      }
      .vs-display {
        font-size: 18px;
        font-weight: 800;
        color: var(--text-muted);
        letter-spacing: 2px;
      }
      .status-badge {
        font-size: 11px;
        font-weight: 700;
        padding: 2px 10px;
        border-radius: 20px;
        background: var(--bg-surface);
        color: var(--text-muted);
        border: 1px solid var(--border);
        white-space: nowrap;
      }
      .status-badge.live {
        background: var(--live-glow);
        color: var(--live);
        border-color: var(--live);
        animation: pulseBadge 1.5s ease infinite;
      }
      @keyframes pulseBadge {
        0%,
        100% {
          box-shadow: 0 0 0 0 rgba(255, 61, 87, 0.3);
        }
        50% {
          box-shadow: 0 0 0 4px rgba(255, 61, 87, 0);
        }
      }
      .match-time {
        font-size: 11px;
        color: var(--text-muted);
        direction: ltr;
      }
      .aggregate-text,
      .win-description {
        font-size: 11px;
        color: var(--gold);
        font-weight: 600;
        text-align: center;
      }
      .live-dot {
        display: inline-block;
        width: 5px;
        height: 5px;
        border-radius: 50%;
        background: var(--live);
        margin-left: 3px;
        vertical-align: middle;
        animation: dotPulse 1.2s ease infinite;
      }
      @keyframes dotPulse {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.4;
          transform: scale(0.7);
        }
      }

      /* â”€â”€ ROUND DIVIDER â”€â”€ */
      .round-divider {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 4px 4px;
        margin-top: 6px;
      }
      .round-divider span {
        font-size: 11px;
        font-weight: 700;
        color: var(--text-muted);
        letter-spacing: 1px;
        white-space: nowrap;
      }
      .round-divider::before,
      .round-divider::after {
        content: "";
        flex: 1;
        height: 1px;
        background: var(--border);
      }

      /* â”€â”€ STATES â”€â”€ */
      .loading-state {
        position: relative;
        z-index: 1;
        text-align: center;
        padding: 80px 20px;
      }
      .spinner {
        width: 44px;
        height: 44px;
        border: 3px solid var(--border);
        border-top-color: var(--accent);
        border-radius: 50%;
        margin: 0 auto 16px;
        animation: spin 0.8s linear infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      .loading-state p {
        color: var(--text-muted);
        font-size: 14px;
      }

      .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: var(--text-muted);
        display: none;
        position: relative;
        z-index: 1;
      }
      .empty-state .icon {
        font-size: 44px;
        margin-bottom: 14px;
      }
      .empty-state p {
        font-size: 14px;
      }

      .error-box {
        text-align: center;
        padding: 48px 20px;
        color: var(--live);
        font-size: 14px;
        position: relative;
        z-index: 1;
      }

      @keyframes fadeUp {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      ::-webkit-scrollbar {
        width: 5px;
        height: 5px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: var(--border);
        border-radius: 4px;
      }

      /* â”€â”€ PAGE TABS â”€â”€ */
      .page-tabs {
        position: relative;
        z-index: 1;
        display: flex;
        max-width: 900px;
        margin: 20px auto 0;
        padding: 0 16px;
        gap: 4px;
      }
      .page-tab {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 7px;
        padding: 10px 0;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        color: var(--text-muted);
        font-family: "Tajawal", sans-serif;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s;
        user-select: none;
      }
      .page-tab:hover {
        color: var(--text-secondary);
        border-color: var(--border-light);
      }
      .page-tab.active {
        background: var(--bg-card-hover);
        border-color: var(--accent);
        color: var(--accent);
        box-shadow: 0 0 12px var(--accent-glow);
      }
      .page-tab .tab-icon {
        font-size: 16px;
      }

      /* â”€â”€ STANDING SECTION â”€â”€ */
      .standing-section {
        position: relative;
        z-index: 1;
        max-width: 900px;
        margin: 0 auto;
        padding: 16px 14px 80px;
        display: none;
      }
      .standing-section.visible {
        display: block;
      }

      /* Table card */
      .standing-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 16px;
        overflow: hidden;
      }

      /* Header row */
      .st-header {
        display: grid;
        grid-template-columns: 36px 1fr 40px 36px 36px 36px 44px;
        align-items: center;
        padding: 10px 14px;
        background: var(--bg-surface);
        border-bottom: 1px solid var(--border);
        font-size: 10px;
        font-weight: 800;
        color: var(--text-muted);
        letter-spacing: 1px;
        text-transform: uppercase;
        gap: 4px;
      }
      .st-header .col-team {
        text-align: right;
      }
      .st-header .col-num {
        text-align: center;
      }

      /* Team row */
      .st-row {
        display: grid;
        grid-template-columns: 36px 1fr 40px 36px 36px 36px 44px;
        align-items: center;
        padding: 9px 14px;
        border-bottom: 1px solid var(--border);
        gap: 4px;
        text-decoration: none;
        color: inherit;
        transition: background 0.15s;
        cursor: pointer;
      }
      .st-row:last-child {
        border-bottom: none;
      }
      .st-row:hover {
        background: var(--bg-card-hover);
      }

      /* Rank cell */
      .st-rank {
        font-family: "Bebas Neue", sans-serif;
        font-size: 16px;
        color: var(--text-muted);
        text-align: center;
        line-height: 1;
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        flex-shrink: 0;
      }
      /* Top 3 rank colours */
      .st-rank.rank-1 {
        background: rgba(255, 213, 79, 0.15);
        color: #ffd54f;
      }
      .st-rank.rank-2 {
        background: rgba(176, 190, 197, 0.12);
        color: #b0bec5;
      }
      .st-rank.rank-3 {
        background: rgba(188, 143, 90, 0.12);
        color: #bc8f5a;
      }

      /* Promotion / relegation zone colour bands */
      .st-row.zone-promotion {
        border-right: 3px solid var(--accent);
      }
      .st-row.zone-playoff {
        border-right: 3px solid var(--gold);
      }
      .st-row.zone-relegation {
        border-right: 3px solid var(--live);
      }

      /* Team cell */
      .st-team {
        display: flex;
        align-items: center;
        gap: 9px;
      }
      .st-team-logo {
        width: 26px;
        height: 26px;
        object-fit: contain;
        border-radius: 50%;
        background: var(--bg-surface);
        padding: 2px;
        flex-shrink: 0;
      }
      .st-team-name {
        font-size: 13px;
        font-weight: 600;
        color: var(--text-primary);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* Number cells */
      .st-num {
        font-size: 13px;
        font-weight: 600;
        color: var(--text-secondary);
        text-align: center;
      }

      /* Points cell */
      .st-pts {
        font-family: "Bebas Neue", sans-serif;
        font-size: 18px;
        color: var(--text-primary);
        text-align: center;
        line-height: 1;
      }

      /* Form column (last 5) */
      .st-form {
        display: flex;
        gap: 3px;
        justify-content: center;
        align-items: center;
      }
      .form-dot {
        width: 7px;
        height: 7px;
        border-radius: 50%;
        flex-shrink: 0;
      }
      .form-dot.W {
        background: var(--accent);
      }
      .form-dot.D {
        background: var(--gold);
      }
      .form-dot.L {
        background: var(--live);
      }

      /* Standing loading skeleton */
      .st-skeleton {
        padding: 16px 14px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .st-skel-row {
        display: flex;
        align-items: center;
        gap: 10px;
        opacity: 0.5;
        animation: skelPulse 1.5s ease infinite;
      }
      @keyframes skelPulse {
        0%,
        100% {
          opacity: 0.25;
        }
        50% {
          opacity: 0.5;
        }
      }
      .st-skel-rank {
        width: 28px;
        height: 28px;
        border-radius: 8px;
        background: var(--border);
        flex-shrink: 0;
      }
      .st-skel-logo {
        width: 26px;
        height: 26px;
        border-radius: 50%;
        background: var(--border);
        flex-shrink: 0;
      }
      .st-skel-name {
        flex: 1;
        height: 13px;
        border-radius: 6px;
        background: var(--border);
        max-width: 120px;
      }
      .st-skel-nums {
        width: 120px;
        height: 13px;
        border-radius: 6px;
        background: var(--border);
      }

      /* Legend */
      .standing-legend {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
        padding: 12px 14px 0;
        margin-top: 12px;
      }
      .legend-item {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 11px;
        color: var(--text-muted);
      }
      .legend-bar {
        width: 3px;
        height: 14px;
        border-radius: 2px;
      }

      @media (max-width: 520px) {
        .st-header,
        .st-row {
          grid-template-columns: 32px 1fr 34px 30px 30px 30px 38px;
          padding: 8px 10px;
        }
        .st-team-name {
          font-size: 12px;
        }
        .st-num {
          font-size: 12px;
        }
        .st-pts {
          font-size: 16px;
        }
      }

      @media (max-width: 480px) {
        .league-identity {
          padding: 18px 16px;
          gap: 14px;
        }
        .league-emblem {
          width: 52px;
          height: 52px;
        }
        .match-card {
          padding: 12px 10px;
          gap: 7px;
        }
        .score-display {
          font-size: 24px;
        }
        .team-name {
          font-size: 12px;
        }
        .team-logo {
          width: 30px;
          height: 30px;
        }
        .match-center {
          min-width: 70px;
        }
        .date-pill {
          min-width: 54px;
          padding: 7px 10px;
        }
        .date-pill .pill-day {
          font-size: 15px;
        }
      }
    </style>
  </head>
  <body>
    <!-- HEADER -->
    <div class="header">
      <a class="logo">ALAMEED</a>
      <div class="header-nav">
        <a class="back-btn" href="index.html">&#8249; Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª</a>
        <a href="../index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      </div>
    </div>

    <!-- LEAGUE HERO (injected) -->
    <div id="leagueHero"></div>

    <!-- PAGE TABS -->
    <div class="page-tabs">
      <button
        class="page-tab active"
        id="tabMatches"
        onclick="switchTab('matches')"
      >
        <span class="tab-icon">âš½</span>
        <span>Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª</span>
      </button>
      <button class="page-tab" id="tabStanding" onclick="switchTab('standing')">
        <span class="tab-icon">ğŸ“Š</span>
        <span>Ø§Ù„ØªØ±ØªÙŠØ¨</span>
      </button>
    </div>

    <!-- DATE NAVIGATOR -->
    <div class="date-nav">
      <div class="date-arrow" onclick="shiftDate(-1)">&#8250;</div>
      <div class="date-strip-wrap">
        <div class="date-strip" id="dateStrip"></div>
      </div>
      <div class="date-arrow" onclick="shiftDate(1)">&#8249;</div>
    </div>

    <!-- FILTER ROW -->
    <div class="filter-row">
      <span class="filter-label" id="filterLabel">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª</span>
      <button class="show-all-btn" id="showAllBtn" onclick="toggleShowAll()">
        Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
      </button>
    </div>

    <!-- LOADING -->
    <div class="loading-state" id="loadingState">
      <div class="spinner"></div>
      <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø¯ÙˆØ±ÙŠ...</p>
    </div>

    <!-- MATCHES -->
    <div class="matches-wrapper" id="matchesContainer"></div>

    <!-- EMPTY -->
    <div class="empty-state" id="emptyState">
      <div class="icon">ğŸ†</div>
      <p id="emptyMsg">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…</p>
    </div>

    <!-- STANDING -->
    <div class="standing-section" id="standingSection">
      <div class="standing-card" id="standingCard">
        <!-- skeleton shown until data arrives -->
        <div class="st-skeleton" id="standingSkeleton">
          <div class="st-skel-row">
            <div class="st-skel-rank"></div>
            <div class="st-skel-logo"></div>
            <div class="st-skel-name"></div>
            <div class="st-skel-nums"></div>
          </div>
          <div class="st-skel-row">
            <div class="st-skel-rank"></div>
            <div class="st-skel-logo"></div>
            <div class="st-skel-name"></div>
            <div class="st-skel-nums"></div>
          </div>
          <div class="st-skel-row">
            <div class="st-skel-rank"></div>
            <div class="st-skel-logo"></div>
            <div class="st-skel-name"></div>
            <div class="st-skel-nums"></div>
          </div>
          <div class="st-skel-row">
            <div class="st-skel-rank"></div>
            <div class="st-skel-logo"></div>
            <div class="st-skel-name"></div>
            <div class="st-skel-nums"></div>
          </div>
          <div class="st-skel-row">
            <div class="st-skel-rank"></div>
            <div class="st-skel-logo"></div>
            <div class="st-skel-name"></div>
            <div class="st-skel-nums"></div>
          </div>
          <div class="st-skel-row">
            <div class="st-skel-rank"></div>
            <div class="st-skel-logo"></div>
            <div class="st-skel-name"></div>
            <div class="st-skel-nums"></div>
          </div>
          <div class="st-skel-row">
            <div class="st-skel-rank"></div>
            <div class="st-skel-logo"></div>
            <div class="st-skel-name"></div>
            <div class="st-skel-nums"></div>
          </div>
          <div class="st-skel-row">
            <div class="st-skel-rank"></div>
            <div class="st-skel-logo"></div>
            <div class="st-skel-name"></div>
            <div class="st-skel-nums"></div>
          </div>
        </div>
      </div>
      <div class="standing-legend" id="standingLegend"></div>
    </div>

    <script>
      /* â•â•â• TABS â•â•â• */
      let activeTab = "matches";

      function switchTab(tab) {
        activeTab = tab;
        document
          .getElementById("tabMatches")
          .classList.toggle("active", tab === "matches");
        document
          .getElementById("tabStanding")
          .classList.toggle("active", tab === "standing");

        const showingMatches = tab === "matches";

        // These are always safe to toggle freely
        [
          document.querySelector(".date-nav"),
          document.querySelector(".filter-row"),
          document.getElementById("matchesContainer"),
        ].forEach((el) => {
          if (el) el.style.display = showingMatches ? "" : "none";
        });

        // emptyState: save & restore its actual state, don't blindly show it
        const emptyState = document.getElementById("emptyState");
        if (emptyState) {
          if (!showingMatches) {
            emptyState.dataset.savedDisplay = emptyState.style.display;
            emptyState.style.display = "none";
          } else {
            emptyState.style.display =
              emptyState.dataset.savedDisplay || "none";
          }
        }

        // loadingState: NEVER restore â€” once hidden after first load it must stay hidden
        const loadingState = document.getElementById("loadingState");
        if (loadingState && !showingMatches) {
          loadingState.style.display = "none";
        }

        const standingSection = document.getElementById("standingSection");
        standingSection.classList.toggle("visible", tab === "standing");

        // Lazy-load standing on first open
        if (tab === "standing" && !standingLoaded) {
          fetchStanding();
        }
      }

      /* â•â•â• STANDING â•â•â• */
      let standingLoaded = false;
      let standingData = null;

      async function fetchStanding() {
        try {
          const league = getQueryParam("league");
          const res = await fetch(
            `https://football-api.alameedtv.workers.dev/v1/json_format/standing?competition=${league}`,
          );
          const data = await res.json();
          standingData = data;
          standingLoaded = true;
          renderStanding(data);
        } catch (e) {
          document.getElementById("standingCard").innerHTML =
            '<div class="error-box">âš ï¸ ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ±ØªÙŠØ¨</div>';
        }
      }

      function calcPoints(row) {
        return row.gamesWon * 3 + row.gamesEven;
      }

      function calcGD(row) {
        // API doesn't expose GF/GA directly, so we just show W/D/L
        return null;
      }

      function renderStanding(data) {
        if (!data || !data.row || data.row.length === 0) {
          document.getElementById("standingCard").innerHTML =
            '<div class="error-box">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØ±ØªÙŠØ¨</div>';
          return;
        }

        const rows = data.row;
        const total = rows.length;
        // Guess zones based on league size (common pattern: top 4 UEFA / bottom 3 relegation)
        const proSlots = Math.min(4, Math.floor(total * 0.22));
        const relSlots = Math.min(3, Math.floor(total * 0.17));

        // Update hero emblem if we have a logo
        if (data.competition_logo) {
          const emblem = document.querySelector(".league-emblem");
          if (emblem) {
            emblem.innerHTML = "";
            const img = document.createElement("img");
            img.src = data.competition_logo;
            img.alt = data.competition_name || "";
            img.onerror = () => {
              emblem.textContent = "ğŸ†";
            };
            emblem.appendChild(img);
          }
          const nameEl = document.querySelector(".league-name");
          if (nameEl && data.competition_name)
            nameEl.textContent = data.competition_name;
          document.title = `${data.competition_name || "Ø§Ù„Ø¯ÙˆØ±ÙŠ"} | ALAMEED TV`;
        }

        const card = document.getElementById("standingCard");
        card.innerHTML = "";

        // â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const header = document.createElement("div");
        header.className = "st-header";
        header.innerHTML = `
          <div class="col-num">#</div>
          <div class="col-team">Ø§Ù„ÙØ±ÙŠÙ‚</div>
          <div class="col-num">Ù„Ø¹</div>
          <div class="col-num">Ù</div>
          <div class="col-num">Øª</div>
          <div class="col-num">Ø®</div>
          <div class="col-num">Ù†Ù‚</div>
        `;
        card.appendChild(header);

        // â”€â”€ Rows â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        rows.forEach((row, idx) => {
          const pts = calcPoints(row);
          const rank = row.rank || idx + 1;
          const isPromo = rank <= proSlots;
          const isRelegate = rank > total - relSlots;
          const isPlayoff = !isPromo && rank === proSlots + 1;

          const tr = document.createElement("a");
          tr.className =
            "st-row" +
            (isPromo ? " zone-promotion" : "") +
            (isPlayoff ? " zone-playoff" : "") +
            (isRelegate ? " zone-relegation" : "");
          tr.href = `team-row.html?teamid=${row.team_id}`;

          // Rank badge
          const rankEl = document.createElement("div");
          rankEl.className =
            "st-rank" +
            (rank === 1
              ? " rank-1"
              : rank === 2
                ? " rank-2"
                : rank === 3
                  ? " rank-3"
                  : "");
          rankEl.textContent = rank;

          // Team cell
          const teamCell = document.createElement("div");
          teamCell.className = "st-team";
          const logo = document.createElement("img");
          logo.className = "st-team-logo";
          logo.src = row.team_logo;
          logo.alt = row.team_name;
          logo.onerror = () => {
            logo.style.visibility = "hidden";
          };
          const name = document.createElement("span");
          name.className = "st-team-name";
          name.textContent = row.team_name;
          teamCell.appendChild(logo);
          teamCell.appendChild(name);

          // Number cells
          const mkNum = (val, extra = "") => {
            const el = document.createElement("div");
            el.className = "st-num" + extra;
            el.textContent = val ?? "-";
            return el;
          };

          // Points cell
          const ptsEl = document.createElement("div");
          ptsEl.className = "st-pts";
          ptsEl.textContent = pts;

          tr.appendChild(rankEl);
          tr.appendChild(teamCell);
          tr.appendChild(mkNum(row.gamePlayed));
          tr.appendChild(mkNum(row.gamesWon));
          tr.appendChild(mkNum(row.gamesEven));
          tr.appendChild(mkNum(row.gamesLost));
          tr.appendChild(ptsEl);

          card.appendChild(tr);
        });

        // â”€â”€ Legend â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const legend = document.getElementById("standingLegend");
        legend.innerHTML = "";
        const zones = [
          { color: "var(--accent)", label: "ØªØ£Ù‡Ù„ Ø£ÙˆØ±ÙˆØ¨ÙŠ / Ø¢Ø³ÙŠÙˆÙŠ" },
          { color: "var(--gold)", label: "Ù…Ù„Ø­Ù‚ Ø§Ù„ØªØ£Ù‡Ù„" },
          { color: "var(--live)", label: "Ù‡Ø¨ÙˆØ·" },
        ];
        zones.forEach((z) => {
          const item = document.createElement("div");
          item.className = "legend-item";
          item.innerHTML = `<div class="legend-bar" style="background:${z.color}"></div><span>${z.label}</span>`;
          legend.appendChild(item);
        });
      }

      /* â•â•â• HELPERS â•â•â• */
      function getQueryParam(p) {
        return new URLSearchParams(window.location.search).get(p);
      }
      function todayStr() {
        return new Date().toISOString().split("T")[0];
      }
      function dateOffset(base, days) {
        const d = new Date(base + "T12:00:00");
        d.setDate(d.getDate() + days);
        return d.toISOString().split("T")[0];
      }
      function isLive(s) {
        return (
          s &&
          (s.includes("Ø´ÙˆØ·") ||
            // s.includes("Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ") ||
            s.includes("Ø¨Ø¯Ù„Ø§Ø¡"))
        );
      }
      function formatDateAr(ds) {
        return new Date(ds + "T12:00:00").toLocaleDateString("ar-SA", {
          weekday: "short",
          month: "short",
          day: "numeric",
        });
      }

      /* â•â•â• STATE â•â•â• */
      let selectedDate = todayStr();
      let showAll = false;
      let allGames = [];
      const RANGE = 7;

      /* â•â•â• LEAGUE HERO â•â•â• */
      function renderLeagueHero(games) {
        const sample = games[0] || {};
        const name = sample.competitionDisplayName || "Ø§Ù„Ø¯ÙˆØ±ÙŠ";
        const liveCount = games.filter((g) => isLive(g.statusText)).length;

        const liveBadge =
          liveCount > 0
            ? `
        <div class="live-hero-badge">
            <div class="live-hero-dot"></div>
            <span>${liveCount} Ù…Ø¨Ø§Ø´Ø±</span>
        </div>`
            : "";

        document.getElementById("leagueHero").innerHTML = `
        <div class="league-hero">
            <div class="league-identity">
                <div class="league-emblem">ğŸ†</div>
                <div class="league-info">
                    <div class="league-name">${name}</div>
                    <div class="league-meta">${games.length} Ù…Ø¨Ø§Ø±Ø§Ø© Â· Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±</div>
                </div>
                ${liveBadge}
            </div>
        </div>
    `;
        document.title = `${name} | ALAMEED TV`;
      }

      /* â•â•â• DATE STRIP â•â•â• */
      function buildDateStrip() {
        const strip = document.getElementById("dateStrip");
        strip.innerHTML = "";
        const today = todayStr();
        const matchDates = new Set(allGames.map((g) => g.startyear));
        const liveDates = new Set(
          allGames.filter((g) => isLive(g.statusText)).map((g) => g.startyear),
        );

        for (let i = -RANGE; i <= RANGE; i++) {
          const ds = dateOffset(today, i);
          const d = new Date(ds + "T12:00:00");
          const pill = document.createElement("div");
          pill.className =
            "date-pill" +
            (ds === today ? " is-today" : "") +
            (ds === selectedDate ? " active" : "") +
            (liveDates.has(ds)
              ? " has-live"
              : matchDates.has(ds)
                ? " has-match"
                : "");
          pill.dataset.date = ds;

          let label = "";
          if (i === -1) label = "Ø£Ù…Ø³";
          else if (i === 0) label = "Ø§Ù„ÙŠÙˆÙ…";
          else if (i === 1) label = "ØºØ¯Ø§Ù‹";
          else label = d.toLocaleDateString("ar-SA", { weekday: "short" });

          pill.innerHTML = `<span class="pill-label">${label}</span><span class="pill-day">${d.getDate()}</span>`;
          pill.onclick = () => {
            showAll = false;
            document.getElementById("showAllBtn").classList.remove("active");
            selectDate(ds);
          };
          strip.appendChild(pill);
        }
        setTimeout(() => {
          const el = document.querySelector(".date-pill.active");
          if (el)
            el.scrollIntoView({
              inline: "center",
              behavior: "smooth",
              block: "nearest",
            });
        }, 60);
      }

      function selectDate(ds) {
        selectedDate = ds;
        document
          .querySelectorAll(".date-pill")
          .forEach((p) => p.classList.toggle("active", p.dataset.date === ds));
        applyFilter();
      }

      function shiftDate(delta) {
        const today = todayStr();
        const newDs = dateOffset(selectedDate, delta);
        const min = dateOffset(today, -RANGE);
        const max = dateOffset(today, RANGE);
        selectedDate = newDs < min ? min : newDs > max ? max : newDs;
        showAll = false;
        document.getElementById("showAllBtn").classList.remove("active");
        buildDateStrip();
        applyFilter();
      }

      function toggleShowAll() {
        showAll = !showAll;
        document
          .getElementById("showAllBtn")
          .classList.toggle("active", showAll);
        applyFilter();
      }

      /* â•â•â• CARD BUILD / UPDATE â•â•â• */
      function buildCard(g, idx) {
        const card = document.createElement("a");
        card.className = "match-card";
        card.href = `game-details.html?gameid=${g.id}`;
        card.dataset.id = g.id;
        card.dataset.date = g.startyear;
        card.style.animationDelay = idx * 30 + "ms";

        if (isLive(g.statusText)) card.classList.add("is-live");

        const gt = g.gameTime ? ` ${g.gameTime}'` : "";
        const dot = isLive(g.statusText)
          ? '<span class="live-dot"></span>'
          : "";
        const score =
          g.statusText === "Ù„Ù… ØªØ¨Ø¯Ø£"
            ? `<div class="vs-display">VS</div>`
            : `<div class="score-display">${g.first_team_score} - ${g.second_team_score}</div>`;
        const agg = g.aggregateText
          ? `<div class="aggregate-text">${g.aggregateText}</div>`
          : "";
        const win = g.winDescription
          ? `<div class="win-description">${g.winDescription}</div>`
          : "";

        card.innerHTML = `
        <div class="team-side right">
            <div class="team-name">${g.first_team}</div>
            <a href="team-row.html?teamid=${g.first_team_id}" onclick="event.stopPropagation()">
                <img class="team-logo" src="${g.first_team_logo}" alt="${g.first_team}" onerror="this.style.display='none'">
            </a>
        </div>
        <div class="match-center">
            ${score}
            <span class="status-badge ${isLive(g.statusText) ? "live" : ""}">${dot}${g.statusText}${gt}</span>
            <span class="match-time">${g.startTime} â€¢ ${g.startyear}</span>
            ${agg}${win}
        </div>
        <div class="team-side left">
            <a href="team-row.html?teamid=${g.second_team_id}" onclick="event.stopPropagation()">
                <img class="team-logo" src="${g.second_team_logo}" alt="${g.second_team}" onerror="this.style.display='none'">
            </a>
            <div class="team-name">${g.second_team}</div>
        </div>
    `;
        return card;
      }

      function updateCard(card, g) {
        const scoreEl = card.querySelector(".score-display, .vs-display");
        if (g.statusText === "Ù„Ù… ØªØ¨Ø¯Ø£") {
          if (scoreEl) {
            scoreEl.className = "vs-display";
            scoreEl.textContent = "VS";
          }
        } else {
          const ns = `${g.first_team_score} - ${g.second_team_score}`;
          if (scoreEl) {
            scoreEl.className = "score-display";
            if (scoreEl.textContent !== ns) scoreEl.textContent = ns;
          }
        }
        const st = card.querySelector(".status-badge");
        if (st) {
          const gt = g.gameTime ? ` ${g.gameTime}'` : "";
          const dot = isLive(g.statusText)
            ? '<span class="live-dot"></span>'
            : "";
          st.innerHTML = `${dot}${g.statusText}${gt}`;
          st.className = `status-badge ${isLive(g.statusText) ? "live" : ""}`;
        }
        card.classList.toggle("is-live", isLive(g.statusText));
        card.dataset.date = g.startyear;

        const meta = card.querySelector(".match-center");
        let ag = card.querySelector(".aggregate-text");
        if (g.aggregateText) {
          if (!ag) {
            ag = document.createElement("div");
            ag.className = "aggregate-text";
            meta.appendChild(ag);
          }
          ag.textContent = g.aggregateText;
        } else if (ag) ag.remove();
        let wd = card.querySelector(".win-description");
        if (g.winDescription) {
          if (!wd) {
            wd = document.createElement("div");
            wd.className = "win-description";
            meta.appendChild(wd);
          }
          wd.textContent = g.winDescription;
        } else if (wd) wd.remove();
      }

      /* â•â•â• RENDER ALL CARDS â•â•â• */
      function renderCards(games) {
        const container = document.getElementById("matchesContainer");
        const existing = new Map();
        container
          .querySelectorAll(".match-card")
          .forEach((c) => existing.set(c.dataset.id, c));

        // Group by round if available, otherwise just append
        games.forEach((g, idx) => {
          const ex = existing.get(g.id);
          if (ex) {
            updateCard(ex, g);
            existing.delete(g.id);
          } else container.appendChild(buildCard(g, idx));
        });
        existing.forEach((c) => c.remove());
      }

      /* â•â•â• FILTER â•â•â• */
      function applyFilter() {
        const cards = document.querySelectorAll(".match-card");
        let visible = 0;

        cards.forEach((c) => {
          const show = showAll || c.dataset.date === selectedDate;
          c.classList.toggle("hidden", !show);
          if (show) visible++;
        });

        document.getElementById("filterLabel").textContent = showAll
          ? `Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª (${cards.length})`
          : `Ù…Ø¨Ø§Ø±ÙŠØ§Øª ${formatDateAr(selectedDate)}`;

        const loading =
          document.getElementById("loadingState").style.display !== "none";
        const empty = document.getElementById("emptyState");
        empty.style.display = !loading && visible === 0 ? "block" : "none";
        document.getElementById("emptyMsg").textContent = showAll
          ? "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙˆØ±ÙŠ"
          : "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…";
      }

      /* â•â•â• API â•â•â• */
      async function fetchMatches() {
        try {
          const league = getQueryParam("league");
          const res = await fetch(
            `https://football-api.alameedtv.workers.dev/v1/son_format?league=${league}`,
          );
          const data = await res.json();

          document.getElementById("loadingState").style.display = "none";

          if (!data.games || data.games.length === 0) {
            document.getElementById("matchesContainer").innerHTML =
              '<div class="error-box">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙˆØ±ÙŠ</div>';
            return;
          }

          allGames = data.games;
          renderLeagueHero(allGames);
          buildDateStrip();
          renderCards(allGames);
          applyFilter();
        } catch (e) {
          document.getElementById("loadingState").style.display = "none";
          document.getElementById("matchesContainer").innerHTML =
            '<div class="error-box">âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹</div>';
        }
      }

      async function refreshMatches() {
        try {
          const league = getQueryParam("league");
          const res = await fetch(
            `https://football-api.alameedtv.workers.dev/v1/son_format?league=${league}`,
          );
          const data = await res.json();
          if (!data.games) return;
          allGames = data.games;
          // update live badge count
          const liveCount = allGames.filter((g) => isLive(g.statusText)).length;
          const badge = document.querySelector(".live-hero-badge");
          if (badge && liveCount > 0)
            badge.querySelector("span").textContent = `${liveCount} Ù…Ø¨Ø§Ø´Ø±`;
          else if (!badge && liveCount > 0) renderLeagueHero(allGames); // re-render if live started
          buildDateStrip();
          renderCards(allGames);
          applyFilter();
        } catch {}
      }

      /* â•â•â• INIT â•â•â• */
      buildDateStrip();
      fetchMatches();
      // setInterval(refreshMatches, 60000);
    </script>
  </body>
</html>
